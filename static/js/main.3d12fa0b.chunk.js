(this["webpackJsonpimage-transform-app"]=this["webpackJsonpimage-transform-app"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(3),o=a.n(l);a(13);var s=e=>{let{currentTransform:t,updateParam:a}=e;const{type:r,params:l}=t,o=function(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return n.a.createElement("div",{className:"mb-4"},n.a.createElement("label",{className:"block text-gray-700 font-bold mb-2"},e,": ",l[t]),n.a.createElement("input",{type:"range",min:r,max:o,value:l[t],onChange:e=>a(t,parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),s&&n.a.createElement("p",{className:"text-sm text-gray-500 mt-1"},s))},s=()=>n.a.createElement("div",{className:"mb-4"},n.a.createElement("label",{className:"block text-gray-700 font-bold mb-2"},"Color Scheme"),n.a.createElement("select",{value:l.colorScheme,onChange:e=>a("colorScheme",e.target.value),className:"block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},n.a.createElement("option",{value:"rainbow"},"Rainbow"),n.a.createElement("option",{value:"pastel"},"Pastel"),n.a.createElement("option",{value:"grayscale"},"Grayscale"),n.a.createElement("option",{value:"highContrast"},"High Contrast"),n.a.createElement("option",{value:"preserveBrightness"},"Preserve Brightness")));switch(r){case"contrast":return o("Contrast","contrastValue",0,200);case"brightness":return o("Brightness","brightnessValue",0,200,"Value in %");case"sharpening":return o("Sharpness","sharpnessValue",0,10);case"threshold":return o("Threshold","thresholdValue",0,255);case"canny":return n.a.createElement(n.a.Fragment,null,o("Low Threshold","cannyLow",0,255),o("High Threshold","cannyHigh",0,255));case"segmentation":return n.a.createElement(n.a.Fragment,null,o("Color Tolerance","segmentTolerance",1,50,"Lower values create more segments, higher values merge similar colors"),o("Minimum Segment Size","segmentMinSize",10,500,"Smaller segments get merged with neighbors"),n.a.createElement(s,null));default:return null}};var c=e=>{let{currentTransform:t,setCurrentTransform:a,updateCurrentTransformParam:r,handleImageUpload:l,addCurrentTransform:o,removeTransform:c,resetImage:m,activeTransformations:i,hasImage:d}=e;const u=[{value:"contrast",label:"Contrast"},{value:"brightness",label:"Brightness"},{value:"sharpening",label:"Sharpening"},{value:"grayscale",label:"Grayscale"},{value:"threshold",label:"Threshold"},{value:"edges",label:"Edge Detection (Sobel)"},{value:"canny",label:"Edge Detection (Canny)"},{value:"segmentation",label:"Color by Segment"}];return n.a.createElement("div",{className:"w-full md:w-1/3 bg-white rounded-lg shadow-lg p-6 mb-6"},n.a.createElement("div",{className:"mb-4"},n.a.createElement("label",{className:"block text-gray-700 font-bold mb-2"},"Upload an image"),n.a.createElement("input",{type:"file",accept:"image/*",onChange:l,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})),n.a.createElement("div",{className:"my-6 border-t border-gray-200 pt-4"},n.a.createElement("h2",{className:"text-xl font-bold mb-4"},"Add Transformation"),n.a.createElement("div",{className:"mb-4"},n.a.createElement("label",{className:"block text-gray-700 font-bold mb-2"},"Select transformation"),n.a.createElement("select",{value:t.type,onChange:e=>a({...t,type:e.target.value}),className:"block w-full mt-1 rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},u.map(e=>n.a.createElement("option",{key:e.value,value:e.value},e.label)))),n.a.createElement(s,{currentTransform:t,updateParam:r}),n.a.createElement("button",{onClick:o,disabled:!d,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md disabled:bg-gray-300 disabled:cursor-not-allowed w-full"},"Add Transformation")),i.length>0&&n.a.createElement("div",{className:"my-6 border-t border-gray-200 pt-4"},n.a.createElement("h2",{className:"text-xl font-bold mb-4"},"Active Transformations"),n.a.createElement("ul",{className:"space-y-2"},i.map((e,t)=>{const a=u.find(t=>t.value===e.type),r=a?a.label:e.type;return n.a.createElement("li",{key:t,className:"bg-gray-100 p-2 rounded flex justify-between items-center"},n.a.createElement("span",{className:"font-medium"},t+1,". ",r),n.a.createElement("button",{onClick:()=>c(t),className:"text-red-500 hover:text-red-700"},"Remove"))})),n.a.createElement("button",{onClick:m,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-md w-full"},"Reset All Transformations")))};var m=e=>{let{originalImage:t,processedImage:a,handleSaveImage:r,canvasRef:l,processedCanvasRef:o}=e;return n.a.createElement("div",{className:"w-full md:w-2/3"},n.a.createElement("div",{className:"flex flex-wrap gap-4 justify-center"},n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6"},n.a.createElement("h2",{className:"text-xl font-bold mb-4"},"Original Image"),n.a.createElement("div",{className:"w-full overflow-auto"},n.a.createElement("canvas",{ref:l,className:"max-w-full h-auto border border-gray-300",style:{display:"none"}}),t?n.a.createElement("img",{src:t.src,alt:"Original",className:"max-w-full h-auto"}):n.a.createElement("div",{className:"flex items-center justify-center border border-gray-300 h-64"},n.a.createElement("p",{className:"text-gray-500"},"No image uploaded yet")))),n.a.createElement("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6"},n.a.createElement("h2",{className:"text-xl font-bold mb-4"},"Processed Image"),n.a.createElement("div",{className:"w-full overflow-auto"},n.a.createElement("canvas",{ref:o,className:"max-w-full h-auto border border-gray-300",style:{display:"none"}}),a?n.a.createElement("img",{src:a,alt:"Processed",className:"max-w-full h-auto"}):n.a.createElement("div",{className:"flex items-center justify-center border border-gray-300 h-64"},n.a.createElement("p",{className:"text-gray-500"},"No transformations applied yet"))),n.a.createElement("button",{onClick:r,disabled:!a,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md disabled:bg-gray-300 disabled:cursor-not-allowed"},"Save Processed Image"))))};const i=e=>{const t=new Uint8ClampedArray(e.data);for(let a=0;a<t.length;a+=4){const e=.299*t[a]+.587*t[a+1]+.114*t[a+2];t[a]=e,t[a+1]=e,t[a+2]=e}return new ImageData(t,e.width,e.height)},d=e=>Math.min(255,Math.max(0,e)),u=e=>{const t=i(e).data,a=e.width,r=e.height,n=new Uint8ClampedArray(t.length),l=[-1,0,1,-2,0,2,-1,0,1],o=[-1,-2,-1,0,0,0,1,2,1];for(let s=1;s<r-1;s++)for(let e=1;e<a-1;e++){const r=4*(s*a+e);let c=0,m=0;for(let n=-1;n<=1;n++)for(let r=-1;r<=1;r++){const i=3*(n+1)+(r+1),d=4*((s+n)*a+(e+r));c+=t[d]*l[i],m+=t[d]*o[i]}const i=Math.sqrt(c*c+m*m);n[r]=i,n[r+1]=i,n[r+2]=i,n[r+3]=255}for(let s=0;s<r;s++)for(let e=0;e<a;e++){if(0!==e&&e!==a-1&&0!==s&&s!==r-1)continue;const t=4*(s*a+e);n[t]=0,n[t+1]=0,n[t+2]=0,n[t+3]=255}return new ImageData(n,a,r)},g=e=>{const t=new Uint8ClampedArray(e.data),a=e.width,r=e.height,n=new Uint8ClampedArray(t),l=[2,4,5,4,2,4,9,12,9,4,5,12,15,12,5,4,9,12,9,4,2,4,5,4,2],o=l.reduce((e,t)=>e+t,0),s=l.map(e=>e/o);for(let c=2;c<r-2;c++)for(let e=2;e<a-2;e++){const r=4*(c*a+e);let l=0,o=0,m=0;for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++){const i=5*(n+2)+(r+2),d=4*((c+n)*a+(e+r));l+=t[d]*s[i],o+=t[d+1]*s[i],m+=t[d+2]*s[i]}n[r]=Math.round(l),n[r+1]=Math.round(o),n[r+2]=Math.round(m)}return new ImageData(n,a,r)},h=(e,t,a)=>{let r,n,l;if(e=(e%360+360)%360,0===t)return r=n=l=a,[Math.round(255*r),Math.round(255*n),Math.round(255*l)];const o=Math.floor(e/60)%6,s=e/60-Math.floor(e/60),c=a*(1-t),m=a*(1-s*t),i=a*(1-(1-s)*t);switch(o){case 0:r=a,n=i,l=c;break;case 1:r=m,n=a,l=c;break;case 2:r=c,n=a,l=i;break;case 3:r=c,n=m,l=a;break;case 4:r=i,n=c,l=a;break;case 5:default:r=a,n=c,l=m}return[Math.round(255*r),Math.round(255*n),Math.round(255*l)]},f=(e,t,a)=>{const r={};switch(a){case"rainbow":for(let t=0;t<e.length;t++){const a=e[t],n=t/e.length*360,l=h(n,.8,.9);r[a]={r:l[0],g:l[1],b:l[2]}}break;case"pastel":for(let t=0;t<e.length;t++){const a=e[t],n=t/e.length*360,l=h(n,.4,.95);r[a]={r:l[0],g:l[1],b:l[2]}}break;case"grayscale":for(let t=0;t<e.length;t++){const a=e[t],n=255-Math.round(t/e.length*220);r[a]={r:n,g:n,b:n}}break;case"highContrast":for(let t=0;t<e.length;t++){const a=e[t],n=h(137.5*t%360,1,1);r[a]={r:n[0],g:n[1],b:n[2]}}break;case"preserveBrightness":for(let a=0;a<e.length;a++){const n=e[a],l=t[n],o=(.299*l.r+.587*l.g+.114*l.b)/255,s=360*Math.random(),c=h(s,.8,o);r[n]={r:c[0],g:c[1],b:c[2]}}break;default:for(let t=0;t<e.length;t++){const a=e[t],n=t/e.length*360,l=h(n,.8,.9);r[a]={r:l[0],g:l[1],b:l[2]}}}return r};var b=()=>{const[e,t]=Object(r.useState)(null),[a,l]=Object(r.useState)(null),[o,s]=Object(r.useState)([]),[h,b]=Object(r.useState)({type:"contrast",params:{contrastValue:100,brightnessValue:100,sharpnessValue:0,thresholdValue:128,cannyLow:50,cannyHigh:150,segmentTolerance:20,segmentMinSize:100,colorScheme:"rainbow"}}),p=Object(r.useRef)(null),w=Object(r.useRef)(null);Object(r.useEffect)(()=>{e&&p.current&&w.current&&y()},[e,o]);const y=()=>{const t=p.current,a=t.getContext("2d");t.width=e.width,t.height=e.height,a.drawImage(e,0,0);let r=a.getImageData(0,0,t.width,t.height);for(const e of o)r=v(r,e);const n=w.current;n.width=t.width,n.height=t.height;n.getContext("2d").putImageData(r,0,0),l(n.toDataURL("image/png"))},v=(e,t)=>{const{type:a,params:r}=t;switch(a){case"contrast":return((e,t)=>{const a=new Uint8ClampedArray(e.data),r=259*(t+255)/(255*(259-t));for(let n=0;n<a.length;n+=4)a[n]=d(r*(a[n]-128)+128),a[n+1]=d(r*(a[n+1]-128)+128),a[n+2]=d(r*(a[n+2]-128)+128);return new ImageData(a,e.width,e.height)})(e,r.contrastValue);case"brightness":return((e,t)=>{const a=new Uint8ClampedArray(e.data),r=t/100;for(let n=0;n<a.length;n+=4)a[n]=d(a[n]*r),a[n+1]=d(a[n+1]*r),a[n+2]=d(a[n+2]*r);return new ImageData(a,e.width,e.height)})(e,r.brightnessValue);case"sharpening":return((e,t)=>{if(0===t)return e;const a=new Uint8ClampedArray(e.data),r=e.width,n=e.height,l=t/10,o=new Uint8ClampedArray(a),s=[0,-l,0,-l,1+4*l,-l,0,-l,0];for(let c=1;c<n-1;c++)for(let e=1;e<r-1;e++){const t=4*(c*r+e);for(let n=0;n<3;n++){let l=0;for(let t=-1;t<=1;t++)for(let o=-1;o<=1;o++){const m=3*(t+1)+(o+1);l+=a[4*((c+t)*r+(e+o))+n]*s[m]}o[t+n]=d(l)}}return new ImageData(o,r,n)})(e,r.sharpnessValue);case"threshold":return((e,t)=>{const a=i(e).data;for(let r=0;r<a.length;r+=4){const e=a[r]<t?0:255;a[r]=e,a[r+1]=e,a[r+2]=e}return new ImageData(a,e.width,e.height)})(e,r.thresholdValue);case"grayscale":return i(e);case"edges":return u(e);case"canny":return((e,t,a)=>{const r=g(e),n=u(r),l=e.width,o=e.height,s=n.data,c=new Uint8ClampedArray(s.length);for(let m=0;m<s.length;m+=4){const e=s[m];e>a?(c[m]=255,c[m+1]=255,c[m+2]=255):e>t?(c[m]=128,c[m+1]=128,c[m+2]=128):(c[m]=0,c[m+1]=0,c[m+2]=0),c[m+3]=255}for(let m=1;m<o-1;m++)for(let e=1;e<l-1;e++){const t=4*(m*l+e);if(128===c[t]){let a=!1;for(let t=-1;t<=1;t++){for(let r=-1;r<=1;r++){if(0===t&&0===r)continue;if(255===c[4*((m+t)*l+(e+r))]){a=!0;break}}if(a)break}a?(c[t]=255,c[t+1]=255,c[t+2]=255):(c[t]=0,c[t+1]=0,c[t+2]=0)}}return new ImageData(c,l,o)})(e,r.cannyLow,r.cannyHigh);case"segmentation":return((e,t,a,r)=>{const n=e.width,l=e.height,o=new Uint8ClampedArray(e.data),s=new Uint8ClampedArray(o),c=new Array(n*l).fill(-1),m={},i={},d=[];let u=0;const g=(e,a,r,s,g)=>{for(d.push([e,a]),c[a*n+e]=u,m[u]=1,i[u]={r:r,g:s,b:g,count:1};d.length>0;){const e=d.pop(),a=e[0],h=e[1],f=[[-1,0],[1,0],[0,-1],[0,1]];for(let b=0;b<f.length;b++){const e=a+f[b][0],p=h+f[b][1];if(e<0||e>=n||p<0||p>=l)continue;const w=p*n+e;if(-1!==c[w])continue;const y=4*w,v=o[y],E=o[y+1],x=o[y+2];Math.sqrt(Math.pow(r-v,2)+Math.pow(s-E,2)+Math.pow(g-x,2))<=t&&(d.push([e,p]),c[w]=u,m[u]++,i[u].r+=v,i[u].g+=E,i[u].b+=x,i[u].count++)}}const h=i[u];h.r=Math.round(h.r/h.count),h.g=Math.round(h.g/h.count),h.b=Math.round(h.b/h.count),u++};for(let f=0;f<l;f++)for(let e=0;e<n;e++){const t=f*n+e;if(-1!==c[t])continue;const a=4*t;g(e,f,o[a],o[a+1],o[a+2])}const h={};for(let f=0;f<u;f++)h[f]=f;for(let f=0;f<u;f++)if(m[f]<a){const e=new Set;for(let o=0;o<l;o++)for(let t=0;t<n;t++){if(c[o*n+t]===f){const a=[[-1,0],[1,0],[0,-1],[0,1]];for(let r=0;r<a.length;r++){const s=t+a[r][0],m=o+a[r][1];if(s<0||s>=n||m<0||m>=l)continue;const i=c[m*n+s];i!==f&&-1!==i&&e.add(h[i])}}}let t=-1,a=1/0;const r=Array.from(e);for(let n=0;n<r.length;n++){const e=r[n],l=Math.sqrt(Math.pow(i[f].r-i[e].r,2)+Math.pow(i[f].g-i[e].g,2)+Math.pow(i[f].b-i[e].b,2));l<a&&(a=l,t=e)}-1!==t&&(h[f]=t)}for(let f=0;f<u;f++){let e=f;for(;h[e]!==e;)e=h[e];h[f]=e}const b=new Set;for(let f=0;f<u;f++)b.add(h[f]);const p=Array.from(b),w=f(p,i,r);for(let f=0;f<l;f++)for(let e=0;e<n;e++){const t=f*n+e,a=c[t];if(-1!==a){const e=w[h[a]];if(e){const a=4*t;s[a]=e.r,s[a+1]=e.g,s[a+2]=e.b}}}return new ImageData(s,n,l)})(e,r.segmentTolerance,r.segmentMinSize,r.colorScheme);default:return e}};return n.a.createElement("div",{className:"flex flex-col min-h-screen bg-gray-100 p-6"},n.a.createElement("h1",{className:"text-3xl font-bold text-center mb-8"},"Image Transformation App"),n.a.createElement("div",{className:"flex flex-col md:flex-row gap-6"},n.a.createElement(c,{currentTransform:h,setCurrentTransform:b,updateCurrentTransformParam:(e,t)=>{b(a=>({...a,params:{...a.params,[e]:t}}))},handleImageUpload:e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onload=e=>{const a=new Image;a.onload=()=>{t(a),s([])},a.src=e.target.result},e.readAsDataURL(a)}},addCurrentTransform:()=>{s(e=>[...e,{...h}])},removeTransform:e=>{s(t=>t.filter((t,a)=>a!==e))},resetImage:()=>{e&&s([])},activeTransformations:o,hasImage:!!e}),n.a.createElement(m,{originalImage:e,processedImage:a,handleSaveImage:()=>{if(a){const e=document.createElement("a");e.href=a,e.download="processed-image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},canvasRef:p,processedCanvasRef:w})))};a(14);var p=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(b,null))};o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(p,null)))},4:function(e,t,a){e.exports=a(15)}},[[4,1,2]]]);
//# sourceMappingURL=main.3d12fa0b.chunk.js.map